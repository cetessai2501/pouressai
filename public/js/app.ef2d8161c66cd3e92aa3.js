webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("Dd8w"),r=n.n(i),s=n("mtWM"),a=n.n(s),c=n("Gu7T"),m=n.n(c),d=n("Xxa5"),u=n.n(d),l=n("gRE1"),p=n.n(l),f=n("exGp"),v=n.n(f),h=n("NYxO");o.a.use(h.a);var _={increment:function(t){t.commit("increment")},addComments:function(t){var e=this;return v()(u.a.mark(function n(){var o,i,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.get("/api/commentis");case 2:o=e.sent.data,i=o,r=[],p()(i).forEach(function(t){r.push(t)}),t.commit("ADD_COMMENTS",r);case 7:case"end":return e.stop()}},n,e)}))()},addComment:function(t,e){a()({method:"post",url:"/api/commentis",data:e,config:{headers:{"X-Requested-With":"XMLHttpRequest"}}}).then(function(e){t.commit("ADD_COMMENT",e.data),console.log(e)}).catch(function(t){console.log(t)})},removeComment:function(t,e){t.commit("DELETE_COMMENT",e)},replyTo:function(t,e){t.commit("REPLY_TO",e)}},C={increment:function(t){t.count++},ADD_COMMENTS:function(t,e){var n;(n=t.comments).push.apply(n,m()(e)),e.children},ADD_COMMENT:function(t,e){if(e.parent_id){console.log(e.parent_id);var n=t.comments.find(function(t){return t.id===e.parent_id}),o=t.comments.findIndex(function(t){return t.id===e.parent_id});console.log(o),void 0!==n&&void 0===n.children&&(n.children=[],n.children.push(e))}else t.comments.push(e)},REPLY_TO:function(t,e){t.reply=e,console.log(t.reply)},DELETE_COMMENT:function(t,e){if(e.reply){var n=t.comments.find(function(t){return t.id===e.reply}),o=n.replies.findIndex(function(t){return t.id===e.id});n.replies.splice(o,1)}else{var i=t.comments.findIndex(function(t){return t.id===e.id});t.comments.splice(i,1)}}},g=new h.a.Store({state:{count:4,comments:[],children:[],reply:0},mutations:C,actions:_,getters:{getComments:function(t){return t.comments},evenOrOdd:function(t){return t.count},getReplies:function(t){return t.comments.children},doneTodosCount:function(t,e){return t.comments.length}}}),b={name:"comment-form",data:function(){return{see:!1,pseudo:"",email:"",content:""}},props:{id:Number,repli:{type:Number,default:0},seen:!1},methods:{sendComment:function(t){if(0===this.repli&&0===this.id){var e=new FormData;e.append("pseudo",this.pseudo),e.append("content",this.content),e.append("email",this.email),e.append("parent_id",this.id),this.$store.dispatch("addComment",e).then(function(){})}else if(0===this.repli&&0!==this.id){var n=new FormData;n.append("pseudo",this.pseudo),n.append("content",this.content),n.append("email",this.email),n.append("parent_id",this.id),this.$store.dispatch("addComment",n).then(function(){})}else{var o=new FormData;o.append("pseudo",this.pseudo),o.append("content",this.content),o.append("email",this.email),o.append("parent_id",this.repli),this.$store.dispatch("addComment",o).then(function(){})}},hideForm:function(t){console.log(t.target.parentNode),t.target.parentNode.style.display="none"}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.see,expression:"see"}]},[n("h3",{staticClass:"ui header dividing"},[t._v(" "+t._s(0==t.repli?"Votre commentaire":"Votre réponse")+"   ")]),t._v(" "),n("form",{staticClass:"ui form",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.sendComment(e)}}},[n("div",{staticClass:"two fields"},[n("div",{staticClass:"field"},[n("label",[t._v("votre pseudo")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pseudo,expression:"pseudo"}],attrs:{type:"text"},domProps:{value:t.pseudo},on:{input:function(e){e.target.composing||(t.pseudo=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"field"},[n("label",[t._v("votre email")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",[t._v("votre commentaire")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{cols:"30",rows:"10"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"ui blue labeled submit icon button"},[n("i",{staticClass:"icon edit"}),t._v("\n"+t._s(0==t.repli?"Commenter":"Répondre")+"\n\n")]),t._v(" "),n("button",{staticClass:"ui grey labeled submit icon button",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.hideForm(e)}}},[n("i",{staticClass:"icon cancel"}),t._v("Annuler\n")])])])},staticRenderFns:[]},y=n("VU/8")(b,w,!1,null,null,null).exports,N={name:"comment",data:function(){return{isNinja:!0}},components:{CommentForm:y},props:{id:Number,comment:Object,repli:{type:Number,default:0}},computed:{formVisible:function(){return this.repli==this.comment.parent_id}},methods:{MD5:function(t){return window.grav(t,50)},test:function(t){return t},replyTo:function(t){y.props.seen,this.$store.dispatch("replyTo",t)},displayForm:function(t){t.target.parentNode.childNodes[2].style.display="block",t.target.style.display="none"}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment",staticStyle:{"background-color":"papayawhip"}},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:"http://www.gravatar.com/avatar/"+t.MD5(t.comment.email),alt:"",title:" "+t.test(t.comment.email)}})]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"author"},[t._v(t._s(t.comment.pseudo))]),n("div",{staticClass:"id"},[t._v(t._s(t.comment.id))]),n("div",{staticClass:"pid"},[t._v(" pid : "+t._s(t.comment.parent_id))]),t._v(" "),n("div",{staticClass:"metadata"},[n("span",{staticClass:"date"},[t._v(" "+t._s(t.comment.comment_time)+"  ")])]),t._v(" "),n("div",{staticClass:"text"},[t._v("\n       "+t._s(t.comment.content)+"\n  ")])]),t._v(" "),n("div",{staticClass:"actions"},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.displayForm(e)}}},[t._v(" "+t._s(0==t.comment.parent_id?"Commenter":"Répondre")+"  ")]),t._v(" "),0==t.comment.parent_id?n("comment-form",{attrs:{id:t.comment.id,repli:0,seen:!0}}):n("comment-form",{attrs:{id:t.comment.id,repli:t.comment.id,seen:!0}})],1),t._v(" "),n("div",{staticClass:"comments"},t._l(t.comment.children,function(t){return n("comment",{key:t.id,attrs:{comment:t}})}),1)])},staticRenderFns:[]},M={data:function(){return{sea:!0,loading:!0,children:[],test:[],item:Object}},components:{Comment:n("VU/8")(N,D,!1,null,null,null).exports,CommentForm:y},props:{model:String,slug:String,id:Number,repli:{type:Number,default:0}},computed:{isFolder:function(){return this.item.children&&this.item.children.length},count:function(){return this.$store.state.count},testo:function(){return this.$store.state.comments},doneTodosCount:function(){return this.$store.getters.doneTodosCount}},methods:r()({},Object(h.b)(["ADD_COMMENTS"]),Object(h.b)({add:"ADD_COMMENT"}),{getCommentis:function(){var t=this.$store.state.comments;return console.log(t.length),t}}),makeFolder:function(){this.isFolder||(this.$emit("make-folder",this.item),this.isOpen=!0)},MD5:function(t){return window.grav(el,20)},created:function(){},mounted:function(){var t=this;this.$store.dispatch("addComments").then(function(){t.$store.state.comments.children,t.loading=!1})}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui comments"},[t._v("\n"+t._s(t.doneTodosCount)+"\n  "),t.loading?n("div",{staticClass:"ui inverted active dimmer"},[n("div",{staticClass:"ui text loader"},[t._v(" Recup ... ")])]):t._e(),t._v(" "),t._l(t.testo,function(t){return n("comment",{key:t.id,attrs:{comment:t}})}),t._v(" "),n("comment-form",{directives:[{name:"show",rawName:"v-show",value:t.sea,expression:"sea"}],attrs:{id:0,repli:0}})],2)},staticRenderFns:[]},E=n("VU/8")(M,x,!1,null,null,null).exports;o.a.config.productionTip=!1,new o.a({el:"#app",store:g,components:{Comments:E}}),window.grav=function(t,e){e=e||80;return function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,o,i,r,s;return i=2147483648&t,r=2147483648&e,s=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(o=1073741824&e)?2147483648^s^i^r:n|o?1073741824&s?3221225472^s^i^r:1073741824^s^i^r:s^i^r}function o(t,o,i,r,s,a,c){return n(e(t=n(t,n(n(function(t,e,n){return t&e|~t&n}(o,i,r),s),c)),a),o)}function i(t,o,i,r,s,a,c){return n(e(t=n(t,n(n(function(t,e,n){return t&n|e&~n}(o,i,r),s),c)),a),o)}function r(t,o,i,r,s,a,c){return n(e(t=n(t,n(n(function(t,e,n){return t^e^n}(o,i,r),s),c)),a),o)}function s(t,o,i,r,s,a,c){return n(e(t=n(t,n(n(function(t,e,n){return e^(t|~n)}(o,i,r),s),c)),a),o)}function a(t){var e,n="",o="";for(e=0;e<=3;e++)n+=(o="0"+(t>>>8*e&255).toString(16)).substr(o.length-2,2);return n}var c,m,d,u,l,p,f,v,h,_=Array();for(_=function(t){for(var e,n=t.length,o=n+8,i=16*((o-o%64)/64+1),r=Array(i-1),s=0,a=0;a<n;)s=a%4*8,r[e=(a-a%4)/4]=r[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,r[e=(a-a%4)/4]=r[e]|128<<s,r[i-2]=n<<3,r[i-1]=n>>>29,r}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e}(t)),p=1732584193,f=4023233417,v=2562383102,h=271733878,c=0;c<_.length;c+=16)m=p,d=f,u=v,l=h,f=s(f=s(f=s(f=s(f=r(f=r(f=r(f=r(f=i(f=i(f=i(f=i(f=o(f=o(f=o(f=o(f,v=o(v,h=o(h,p=o(p,f,v,h,_[c+0],7,3614090360),f,v,_[c+1],12,3905402710),p,f,_[c+2],17,606105819),h,p,_[c+3],22,3250441966),v=o(v,h=o(h,p=o(p,f,v,h,_[c+4],7,4118548399),f,v,_[c+5],12,1200080426),p,f,_[c+6],17,2821735955),h,p,_[c+7],22,4249261313),v=o(v,h=o(h,p=o(p,f,v,h,_[c+8],7,1770035416),f,v,_[c+9],12,2336552879),p,f,_[c+10],17,4294925233),h,p,_[c+11],22,2304563134),v=o(v,h=o(h,p=o(p,f,v,h,_[c+12],7,1804603682),f,v,_[c+13],12,4254626195),p,f,_[c+14],17,2792965006),h,p,_[c+15],22,1236535329),v=i(v,h=i(h,p=i(p,f,v,h,_[c+1],5,4129170786),f,v,_[c+6],9,3225465664),p,f,_[c+11],14,643717713),h,p,_[c+0],20,3921069994),v=i(v,h=i(h,p=i(p,f,v,h,_[c+5],5,3593408605),f,v,_[c+10],9,38016083),p,f,_[c+15],14,3634488961),h,p,_[c+4],20,3889429448),v=i(v,h=i(h,p=i(p,f,v,h,_[c+9],5,568446438),f,v,_[c+14],9,3275163606),p,f,_[c+3],14,4107603335),h,p,_[c+8],20,1163531501),v=i(v,h=i(h,p=i(p,f,v,h,_[c+13],5,2850285829),f,v,_[c+2],9,4243563512),p,f,_[c+7],14,1735328473),h,p,_[c+12],20,2368359562),v=r(v,h=r(h,p=r(p,f,v,h,_[c+5],4,4294588738),f,v,_[c+8],11,2272392833),p,f,_[c+11],16,1839030562),h,p,_[c+14],23,4259657740),v=r(v,h=r(h,p=r(p,f,v,h,_[c+1],4,2763975236),f,v,_[c+4],11,1272893353),p,f,_[c+7],16,4139469664),h,p,_[c+10],23,3200236656),v=r(v,h=r(h,p=r(p,f,v,h,_[c+13],4,681279174),f,v,_[c+0],11,3936430074),p,f,_[c+3],16,3572445317),h,p,_[c+6],23,76029189),v=r(v,h=r(h,p=r(p,f,v,h,_[c+9],4,3654602809),f,v,_[c+12],11,3873151461),p,f,_[c+15],16,530742520),h,p,_[c+2],23,3299628645),v=s(v,h=s(h,p=s(p,f,v,h,_[c+0],6,4096336452),f,v,_[c+7],10,1126891415),p,f,_[c+14],15,2878612391),h,p,_[c+5],21,4237533241),v=s(v,h=s(h,p=s(p,f,v,h,_[c+12],6,1700485571),f,v,_[c+3],10,2399980690),p,f,_[c+10],15,4293915773),h,p,_[c+1],21,2240044497),v=s(v,h=s(h,p=s(p,f,v,h,_[c+8],6,1873313359),f,v,_[c+15],10,4264355552),p,f,_[c+6],15,2734768916),h,p,_[c+13],21,1309151649),v=s(v,h=s(h,p=s(p,f,v,h,_[c+4],6,4149444226),f,v,_[c+11],10,3174756917),p,f,_[c+2],15,718787259),h,p,_[c+9],21,3951481745),p=n(p,m),f=n(f,d),v=n(v,u),h=n(h,l);return(a(p)+a(f)+a(v)+a(h)).toLowerCase()}(t)+".jpg?s="+e}}},["NHnr"]);
//# sourceMappingURL=app.ef2d8161c66cd3e92aa3.js.map